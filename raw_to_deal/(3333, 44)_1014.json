{"relation": [["Name", "accept", "accept-charset", "accept-encoding", "accept-language", "authorization", "connection", "content-type", "content-length", "cookie", "cookie2", "host", "pragma", "referer", "user-agent"], ["Code value", "0xA001", "0xA002", "0xA003", "0xA004", "0xA005", "0xA006", "0xA007", "0xA008", "0xA009", "0xA00A", "0xA00B", "0xA00C", "0xA00D", "0xA00E"], ["Code name", "SC_REQ_ACCEPT", "SC_REQ_ACCEPT_CHARSET", "SC_REQ_ACCEPT_ENCODING", "SC_REQ_ACCEPT_LANGUAGE", "SC_REQ_AUTHORIZATION", "SC_REQ_CONNECTION", "SC_REQ_CONTENT_TYPE", "SC_REQ_CONTENT_LENGTH", "SC_REQ_COOKIE", "SC_REQ_COOKIE2", "SC_REQ_HOST", "SC_REQ_PRAGMA", "SC_REQ_REFERER", "SC_REQ_USER_AGENT"]], "pageTitle": "mod_proxy_ajp - Apache HTTP Server Version 2.2", "title": "", "url": "http://httpd.apache.org/docs/2.2/zh-cn/mod/mod_proxy_ajp.html", "hasHeader": true, "headerPosition": "FIRST_ROW", "tableType": "RELATION", "tableNum": 6, "s3Link": "common-crawl/crawl-data/CC-MAIN-2015-32/segments/1438042988399.65/warc/CC-MAIN-20150728002308-00328-ip-10-236-191-2.ec2.internal.warc.gz", "recordEndOffset": 110989783, "recordOffset": 110979216, "tableOrientation": "HORIZONTAL", "TableContextTimeStampAfterTable": "{11077=For most packets, the first byte of the payload encodes the type of message. The exception is for request body packets sent from the server to the container -- they are sent with a standard packet header ( 0x1234 and then length of the packet), but without any prefix code after that., 29521=Copyright 2015 The Apache Software Foundation. Licensed under the Apache License, Version 2.0., 9558=According to much of the code, the max packet size is 8 * 1024 bytes (8K). The actual length of the packet is encoded in the header., 9744=Packets sent from the server to the container begin with 0x1234. Packets sent from the container to the server begin with AB (that's the ASCII code for A followed by the ASCII code for B). After those first two bytes, there is an integer (encoded as above) with the length of the payload. Although this might suggest that the maximum payload could be as large as 2^16, in fact, the code sets the maximum to be 8K.}", "lastModified": "Fri, 17 Apr 2015 20:35:13 GMT", "textBeforeTable": "Packets sent from the server to the container begin with 0x1234. Packets sent from the container to the server begin with AB (that's the ASCII code for A followed by the ASCII code for B). After those first two bytes, there is an integer (encoded as above) with the length of the payload. Although this might suggest that the maximum payload could be as large as 2^16, in fact, the code sets the maximum to be 8K. Packet Headers According to much of the code, the max packet size is 8 * 1024 bytes (8K). The actual length of the packet is encoded in the header. Packet Size strlen. This is a touch confusing on the Java side, which is littered with odd autoincrement statements to skip over these terminators. I believe the reason this was done was to allow the C code to be extra efficient when reading strings which the servlet container is sending back -- with the terminating \\0 character, the C code can pass around references into a single buffer, without copying. if the \\0 was missing, the C code would have to copy things out in order to get its notion of a string. not include the trailing '\\0' -- it is like A variable-sized string (length bounded by 2^16). Encoded with the length packed into two bytes first, followed by the string (including the terminating '\\0'). Note that the encoded length does String 0 to 2^16 (32768).", "textAfterTable": "To ensure some basic security, the container will only actually do the Shutdown if the request comes from the same machine on which it's hosted. The first Data packet is send immediately after the Forward Request by the web server. The servlet container can send the following types of messages to the webserver: Code Type of Packet Meaning 3 Send Body Chunk Send a chunk of the body from the servlet container to the web server (and presumably, onto the browser). 4 Send Headers Send the response headers from the servlet container to the web server (and presumably, onto the browser). 5 End Response Marks the end of the response (and thus the request-handling cycle). 6 Get Body Chunk Get further data from the request if it hasn't all been transferred yet. 9 CPong Reply The reply to a CPing request Each of the above messages has a different internal structure, detailed below. Request Packet Structure For messages from the server to the container of type Forward Request: AJP13_FORWARD_REQUEST := prefix_code (byte) 0x02 = JK_AJP13_FORWARD_REQUEST method (byte) protocol (string) req_uri (string) remote_addr (string) remote_host (string) server_name (string) server_port (integer) is_ssl (boolean) num_headers (integer) request_headers *(req_header_name req_header_value) attributes *(attribut_name attribute_value) request_terminator (byte) OxFF The request_headers have the following structure: req_header_name := sc_req_header_name", "hasKeyColumn": true, "keyColumnIndex": 0, "headerRowIndex": 0}