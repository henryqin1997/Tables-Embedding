{"relation": [["ADC0 values", "230-370", "480-620", "830-970", "1230-1370", "1930-2070", "44"], ["remote key", "VOL-", "VOL+", "NEXT", "PREV", "SELECT", "HOLD"], ["bitflag", "0x00100000", "0x00080000", "0x00020000", "0x00040000", "0x80000000", "?"]], "pageTitle": "DissasemblyMPIOHD200 < Main < Wiki", "title": "", "url": "http://www.rockbox.org/wiki/DissasemblyMPIOHD200?rev=60%3bsortcol=2%3btable=5%3bup=0", "hasHeader": true, "headerPosition": "FIRST_ROW", "tableType": "RELATION", "tableNum": 6, "s3Link": "common-crawl/crawl-data/CC-MAIN-2015-32/segments/1438042981921.1/warc/CC-MAIN-20150728002301-00280-ip-10-236-191-2.ec2.internal.warc.gz", "recordEndOffset": 685655161, "recordOffset": 685639226, "tableOrientation": "HORIZONTAL", "TableContextTimeStampAfterTable": "{39835=in: Battery charging (high)/Battery full (low) (LTC1733 /CHRG) out: USB related?}", "textBeforeTable": "0x00002000 SELECT 1950-2250 0x00000004 PREV 1600-1900 0x00000002 NEXT 1250-1550 0x00000008 VOL+ 900-1200 0x00000010 VOL- 550-850 0x00000020 REC 200-500 bitflag internal key ADC1 values Key reading Battery charging 5249 ADC is used. Input1 is for internal buttons, and Input0 probably for remote. Below are values taken from dissasembly and crosschecked with \"Test mode\". The bitflag describes return value of the \"read_keys()\" subroutine in OF. One can see that flags for internal keys are in low word and for remote are in high word. Charging is done by LTC1733 chip. It charges with 100mA current (15k Ohm PROG resistor)", "textAfterTable": "In the same routine GPIO56 high produces flag 0x00000001 and GPIO41 produces flag 0x00010000 which is PLAY signal (main and remote respectively). battery level reading ADC2 is related to battery level. In firmware there are some flags assigned based on reading from ADC. ADC is read 20 times, than we take mean value of 10 biggest readings and based on this battery level is determined. In other battery related subroutine moving average filter with 20 readings window and ramping is used. Voltages ware measured by hooking external power supply to the connector instead of the battery. Current draw is 70-80 mA for idle and 120-160 mA when playing music. Backlight contribution is about 20mA. ADC2 values flag voltage [V] <2250 low battery <3.70 2250-2280 6 3.70 - 3.75 2280-2330 5 3.75 - 3.85 2330-2450 4 3.85 - 4.05", "hasKeyColumn": true, "keyColumnIndex": 1, "headerRowIndex": 0}