{
    "relation": [
        [
            "Option",
            "rescueshell",
            "sshd",
            "sshd_wait=x",
            "sshd_port=x",
            "binit_net_if=interface",
            "binit_net_addr=",
            "binit_net_gw=ipaddr",
            "rw",
            "mdev",
            "softraid",
            "init=",
            "tuxonice",
            "uswsusp",
            "swsusp",
            "resume=",
            "lvm",
            "luks",
            "luks_trim",
            "enc_root=",
            "root=",
            "rootfstype=",
            "rootdelay=",
            "rootflags=x"
        ],
        [
            "Description",
            "Drop to the rescueshell before mounting rootfs to /newroot",
            "Run the sshd server when the initramfs loads. This allows you to ssh into your initramfs to fix any errors that may have occurred while booting.",
            "Wait x number of seconds after starting sshd to continue booting the system.",
            "Change the port that sshd \"listens\" on. The default port for sshd is port 22.",
            "Choose which interface the network should be configured on. For example: wlan0, eth0, etc.",
            "Configure ipaddr with cidr netmask. For example: 11.11.11.2/24. If you do not add a netmask, the netmask is assumed to be 32. Furthermore, you will have to configure binit_net_gw.",
            "The address of your gateway. Only needed if you want to connect to WAN.",
            "Mount the rootfs as read-write. By default, the rootfs is mounted as read only.",
            "Use mdev instead of devtmpfs. This option can prove handy on older kernels.",
            "Detect and run RAID arrays.",
            "Change the init system. For example, if you are using systemd, change this to /usr/lib/systemd/systemd. The default for this option (/sbin/init) will work fine with OpenRC.",
            "Try resuming with TuxOnIce.",
            "Try resuming the system with userspace software suspend. This depends on the resume option.",
            "Try resuming the system with in-kernel suspend. This depends on the resume option.",
            "Specify the device and path from which you want to resume.",
            "Scan for volume groups. If any are found, activate them.",
            "Run cryptsetup luksOpen on the enc_root variable.",
            "Enable support for TRIM on your LUKS encrypted root device. This option is very helpful for those using SSDs.",
            "The device that you wish to decrypt using cryptsetup luksOpen.",
            "The name of your root device.",
            "Specify the type of filesystem that your rootfs uses.",
            "How long the initramfs should wait before attempting to mount devices.",
            "Pass x flags to mount as it mounts your rootfs."
        ]
    ],
    "pageTitle": "Initramfs - Funtoo",
    "title": "",
    "url": "http://www.funtoo.org/index.php?title=Funtoo_Linux_Kernels&oldid=5043",
    "hasHeader": true,
    "headerPosition": "FIRST_ROW",
    "tableType": "RELATION",
    "tableNum": 0,
    "s3Link": "common-crawl/crawl-data/CC-MAIN-2015-32/segments/1438042989018.40/warc/CC-MAIN-20150728002309-00129-ip-10-236-191-2.ec2.internal.warc.gz",
    "recordEndOffset": 463036107,
    "recordOffset": 463023906,
    "tableOrientation": "HORIZONTAL",
    "textBeforeTable": "Options Now that the initramfs.cpio.gz file is in /boot, we can configure what we want the initramfs to do for us when the system boots. Below is a table of options that better-initramfs supports (from better-initramfs Bitbucket page): Configuring /etc/boot.conf # cp output/initramfs.cpio.gz /boot # make image # make prepare # bootstrap/bootstrap-all # cd better-initramfs   do not run make prepare or make image until you have configured your kernel. If you have not installed / configured a kernel yet, check out:  Building a Kernel From Source and  Funtoo Linux Kernels.  Note  Now that you have better-initramfs on your system, we can make the initramfs.cpio.gz image and move it to /boot. Building /initramfs.cpio.gz # git clone https://bitbucket.org/piotrkarbowski/better-initramfs.git # cd /opt  To install better-initramfs on your system, change to the /opt directory (or any other directory that you deem suitable) and clone the better-initramfs repository from bitbucket.  Installation Piotr's better-initramfs is a popular approach among Funtoo'ers to building an initramfs. It is quick, nice, and shiny. The biggest plus is that, once built, it is kernel version independent.  better-initramfs The reason to build a kernel with an initramfs is mostly for interoperability (e.g. live-cd's) and special features like an included busybox, ssh,",
    "textAfterTable": "Examples Below are examples of different use cases for better-initramfs and how your /etc/boot.conf should be configured for them. Note Realize that your enc_root, root, and rootfstype variables may be different from the examples provided below. Regular ext4 root /etc/boot.conf  \"Funtoo Linux\" { kernel\tvmlinuz[-v] initrd\t/initramfs.cpio.gz params\t+= root=/dev/sdaX rootfstype=ext4 } Encrypted root with lvm /etc/boot.conf  \"Funtoo Linux\" { kernel\tvmlinuz[-v] initrd\t/initramfs.cpio.gz params\t+= enc_root=/dev/sdaX lvm luks luks_trim root=/dev/mapper/funtoo--vg-root rootfstype=ext4 } Encrypted root with lvm and RAID /etc/boot.conf  \"Funtoo Linux\" { kernel\tvmlinuz[-v] initrd\t/initramfs.cpio.gz params\t+= enc_root=/dev/md0 lvm luks luks_trim softraid root=/dev/mapper/funtoo--vg-root rootfstype=ext4 } Dracut Installation To install Dracut, simply emerge it:  # emerge dracut Build the initramfs To build the initrd with dracut, we just execute:  # dracut -f --fstab --xz /boot/initramfs-3.2.6-pf.img 3.2.6-pf Generally, this should be enough! If you experience booting problems like missing modules / drivers then just boot from your livecd and fix Dracut or consider changing to another initramfs. You can look into the man page to tweak the command a bit (e.g. --add-drivers \"xz dm_crypt\" etc...). Configuring /etc/boot.conf Examples Encrypted",
    "hasKeyColumn": false,
    "keyColumnIndex": -1,
    "headerRowIndex": 0
}