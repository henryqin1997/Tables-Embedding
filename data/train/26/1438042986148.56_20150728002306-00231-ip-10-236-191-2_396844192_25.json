{
    "relation": [
        [
            "",
            "Step 1",
            "Step 2",
            "Step 3",
            "Step 4",
            "Step 5"
        ],
        [
            "Command or Action",
            "enable Example: Router> enable",
            "configure terminal Example: Router# configure terminal",
            "dial-peer voice tag voip Example: Router(config)# dial-peer voice 29 voip",
            "dtmf-relay sip-kpml Example: Router(config-dial-peer)# dtmf-relay sip-kpml",
            "exit Example: Router(config-dial-peer)# exit"
        ],
        [
            "Purpose",
            "Enters privileged EXEC mode or any other security level set by a system administrator. Enter your password if prompted.",
            "Enters global configuration mode.",
            "Enters dial-peer configuration mode for the designated dial peer.",
            "Forwards DTMF tones using SIP KPML messages.",
            "Exits the current mode."
        ]
    ],
    "pageTitle": "SIP Configuration Guide, Cisco IOS Release 12.4T - Configuring SIP DTMF Features [Cisco IOS Software Releases 12.4 T] - Cisco",
    "title": "",
    "url": "http://www.cisco.com/c/en/us/td/docs/ios-xml/ios/voice/sip/configuration/12-4t/sip-12-4t-book/voi-sip-dtmf.html",
    "hasHeader": true,
    "headerPosition": "FIRST_ROW",
    "tableType": "RELATION",
    "tableNum": 25,
    "s3Link": "common-crawl/crawl-data/CC-MAIN-2015-32/segments/1438042986148.56/warc/CC-MAIN-20150728002306-00231-ip-10-236-191-2.ec2.internal.warc.gz",
    "recordEndOffset": 396885911,
    "recordOffset": 396844192,
    "tableOrientation": "HORIZONTAL",
    "TableContextTimeStampBeforeTable": "{45944=DTMF tones are generated when a button on a touch-tone phone is pressed. When the tone is generated, it is compressed, transported to the other party, and decompressed. If a low-bandwidth codec, such as a G.729 or G.723 is used without a DTMF relay method, the tone may be distorted during compression and decompression., 36937=The NOTIFY-based out-of-band DTMF relay mechanism is similar to the DTMF message format described in RFC 2833. NOTIFY-based out-of-band DTMF relay consists of 4 bytes in a binary encoded format. The message format is shown in the figure below; field descriptions are listed in the table below., 30312=Every DTMF event corresponds to at least two NOTIFYs: an initial NOTIFY message and an end NOTIFY message. There might also be some update NOTIFYs involved, if the total duration of the event is greater than the negotiated max-duration interval. Because DTMF events generally last for less than 1000 ms, setting the duration using notify telephone-event command to more than 1000 ms reduces the total number of NOTIFY messages sent. The default value of notify telephone-event command is 2000 ms., 9082=When the gateway originates an INVITE message, the gateway advertises the preferred dynamic codec. However, when the gateway receive an 18x/2xx response with a different dynamic payload, the gateway first checks whether the new payload, in the answer SDP message, is being used for the same dynamic codec that was advertised. If the new payload is the same codec, and if the dynamic payload is available for use, the received payload is used in all RTP dynamic codec packets that are generated by the gateway. At the same time, the gateway expects the remote end to send packets with the preferred payload that the gateway advertised in its original request., 54771=The MTP or transcoding module on a gateway detects RFC 2833 (DTMF) packets from an IP endpoint. You can configure whether it should do either or both of the following:, 55252=The RFC 2833 DTMF Media Termination Point (MTP) Passthrough feature passes DTMF tones transparently between Session Initiation Protocol (SIP) endpoints that require either transcoding or use of the RSVP Agent feature. (An RSVP agent is a Cisco IOS-based Resource Reservation Protocol [RSVP] proxy server that registers with the call manager--Cisco Unified CallManager or Cisco Unified CallManager Express--as a media-termination point or a transcoder device.), 6171=The figure below summarizes the call behavior for UAS when using asymmetric dynamic codec payloads., 16062=The SIP Support for Asymmetric SDP feature allows a SIP gateway to receive an offer or answer with a different payload than it prefers, and treat the payloads as asymmetric, as long as both the payloads are not in use. The gateway interprets the payload that it receives and generates RTP packets for DTMF events and dynamic codecs. The gateway expects to receive the DTMF events and dynamic codec payload value it originally sent in the request/response message. In this way, the gateway advertises its preferred payload in the answer to the offer that it receives., 46578=The SIP NTE DTMF relay feature provides reliable digit relay between Cisco VoIP gateways when a low-bandwidth codec is used. Using NTE to relay DTMF tones provides a standardized means of transporting DTMF tones in Real-Time Transport Protocol (RTP) packets according to section 3 of RFC 2833, RTP Payload for DTMF Digits, Telephony Tones and Telephony Signals , developed by the Internet Engineering Task Force (IETF) Audio/Video Transport (AVT) working group. RFC 2833 defines formats of NTE RTP packets used to transport DTMF digits, hookflash, and other telephony events between two peer endpoints., 10757=When the gateway receives a delayed media request, the gateway offers the preferred DTMF relay and payload in its response. If the remote end responds with the same DTMF relay and different payload, this new payload is used to generate RTP RFC 2833 events packets. The gateway expects the remote end to send packets with the preferred payload that the gateway advertised in its response., 1506=To configure RFC 2833 DTMF MTP Passthrough on a gateway that does not itself contain an MTP or transcoder but connects to another gateway that does, perform the following steps., 6974=When a gateway receives an INVITE message which has a dynamic codec and payload, and the requested dynamic codec and payload is negotiated successfully, the gateway uses the same payload in its response to the INVITE message. The gateway cannot generate a different dynamic payload in a response message., 6646=Beginning with Cisco IOS Release 12.4(15)T, when a gateway receives a delayed media request, you can configure the gateway to offer the preferred dynamic codec and payload in its response. If the remote end responds with the same dynamic codec and a different payload, this new payload is used to generate the codec RTP packets. The gateway expects the remote end to send packets with the preferred payload that the gateway advertised in its response., 33538=In RFC 2833, unused corresponds to the volume field, but is not used in NOTIFY-based out-of-band DTMF relay., 8400=If the gateway is unable to use the new payload that the remote end requests in the answer, then codec negotiation for that particular dynamic codec fails., 8221=The figure below summarizes the call behavior for a UAC when using asymmetric dynamic codec payloads.}",
    "TableContextTimeStampAfterTable": "{84456=Enables the gateway to send and receive DTMF and dynamic codec RTP packets with different payloads., 107430=The following example shows a sample configuration of the RFC 2833 DTMF MTP Passthrough feature on a SIP gateway., 117858=RFC 2833, 50419=Router(config-sip-ua)# notify telephone-event max-duration 2000, 71844=The following sample output shows that the time interval between consecutive NOTIFY messages for a telephone event is the default of 2000 ms:}",
    "textBeforeTable": "DETAILED STEPS 5.\u00a0\u00a0\u00a0 exit 4.\u00a0\u00a0\u00a0 dtmf-relay sip-kpml 3.\u00a0\u00a0\u00a0 dial-peer voice tag voip 2.\u00a0\u00a0\u00a0 configure terminal 1.\u00a0\u00a0\u00a0 enable SUMMARY STEPS Configuring SIP KPML-Based Out-of-Band DTMF Relay Exits the current mode. \u00a0 Router(config-sip-ua)# exit \u00a0 Example: exit Step\u00a08 \u00a0 max-duration time --Time, in ms, between consecutive NOTIFY messages for a single DTMF event. Range: 500 to 3000. Default: 2000. Sets the maximum time interval allowed between",
    "textAfterTable": "Verifying SIP DTMF Support To verify SIP DTMF support, perform the following steps as appropriate (commands are listed in alphabetical order). SUMMARY STEPS 1.\u00a0\u00a0\u00a0 show running-config 2.\u00a0\u00a0\u00a0 show sip-ua retry 3.\u00a0\u00a0\u00a0 show sip-ua statistics 4.\u00a0\u00a0\u00a0 show sip-ua status 5.\u00a0\u00a0\u00a0 show sip-ua timers 6.\u00a0\u00a0\u00a0 show voip rtp connections 7.\u00a0\u00a0\u00a0 show sip-ua calls DETAILED STEPS Step\u00a01\u00a0\u00a0 show running-config Use this command to show dial-peer configurations. The following sample output shows that the dtmf-relay sip-notify command is configured in dial peer 123: Example:  Router# show running-config . . . dial-peer voice 123 voip destination-pattern [12]... monitor probe icmp-ping session protocol sipv2 session target ipv4:10.8.17.42 dtmf-relay sip-notify The following sample output shows that DTMF relay and NTE are configured",
    "hasKeyColumn": true,
    "keyColumnIndex": 0,
    "headerRowIndex": 0
}