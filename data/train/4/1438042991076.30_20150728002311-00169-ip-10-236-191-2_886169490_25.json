{
    "relation": [
        [
            "Virtual machine",
            "Client Access and Hub Transport combination",
            "Mailbox (primary DAG)",
            "Mailbox (alternate DAG)",
            "Total"
        ],
        [
            "Virtual processor count",
            "3",
            "4",
            "2",
            "9"
        ]
    ],
    "pageTitle": "Exchange 2010 Tested Solutions: 32400 Mailboxes In Three Sites Running Hyper-V on Cisco Unified Compute System Blade Servers and EMC CLARiiON Storage",
    "title": "",
    "url": "https://technet.microsoft.com/en-us/library/hh145600(v=exchg.80).aspx",
    "hasHeader": true,
    "headerPosition": "FIRST_ROW",
    "tableType": "RELATION",
    "tableNum": 25,
    "s3Link": "common-crawl/crawl-data/CC-MAIN-2015-32/segments/1438042991076.30/warc/CC-MAIN-20150728002311-00169-ip-10-236-191-2.ec2.internal.warc.gz",
    "recordEndOffset": 886244807,
    "recordOffset": 886169490,
    "tableOrientation": "HORIZONTAL",
    "TableContextTimeStampAfterTable": "{73812=There are technical reasons and several issues that you should consider before using the features built into Exchange\u00a02010 as a replacement for traditional backups. Prior to making this decision, see Understanding Backup, Restore and Disaster Recovery., 411543=1439, 411279=2193, 338599=The first step in storage validation is to verify that the database latencies are below the target thresholds. In previous releases, logical disk counters determined disk read and write latency. In Exchange 2010, the Exchange Mailbox server that you are monitoring is likely to have a mix of active and passive mailbox database copies. The I/O characteristics of active and passive database copies are different. Because the size of the I/O is much larger on passive copies, there are typically much higher latencies on passive copies. Latency targets for passive databases are 200\u00a0msec, which is 10 times higher than targets on active database copies. This isn't much of a concern because high latencies on passive databases have no impact on client experience. But if you are using the traditional logical disk counters to measure latencies, you must review the individual volumes and separate volumes containing active and passive databases. Instead, we recommend that you use the new MSExchange Database counters in Exchange 2010., 312044=For validation of end-to-end solution performance and scalability, we recommend the Microsoft Exchange Server Load Generator tool (Loadgen). Loadgen is designed to produce a simulated client workload against an Exchange deployment. This workload can be used to evaluate the performance of the Exchange system, and can also be used to evaluate the effect of various configuration changes on the overall solution while the system is under load. Loadgen is capable of simulating Microsoft Office Outlook 2007 (online and cached), Office Outlook 2003 (online and cached), POP3, IMAP4, SMTP, ActiveSync, and Outlook Web App (known in Exchange 2007 and earlier versions as Outlook Web Access) client activity. It can be used to generate a single protocol workload, or these client protocols can be combined to generate a multiple protocol workload., 412705=2798, 109737=In this example, EMC storage has been used for many years, and an EMC storage solution will be used for Exchange 2010 deployment. EMC Corporation offers high performing storage arrays like CLARiiON and Symmetric., 285302=Exchange 2010 Update Rollup 2, 36328=This document provides an example of how to design, test, and validate an Exchange Server 2010 solution running Windows Server 2008 R2 Hyper-V technology for a customer environment with 32,400 mailboxes deployed on Cisco Unified Computing System blade servers and EMC CLARiiON storage solutions. One of the key challenges with designing larger Exchange 2010 environments is examining the current server and storage options available and making the right hardware choices that provide the best value over the anticipated life of the solution. Following the step-by-step methodology in this document, we will walk through the important design decision points that help address these key challenges while ensuring that the customer's core business requirements are met. After we have determined the optimal solution for this customer, the solution undergoes a standard validation process to ensure that it holds up under simulated production workloads for normal operating, maintenance, and failure scenarios., 474015=For the complete Exchange 2010 documentation, see Exchange Server 2010., 411582=1703, 339663=When validating latencies on Exchange 2010 Mailbox servers, we recommend you use the counters in the following table for active databases., 251362== 0.10 \u00d7 2700 \u00d7 20%, 282845=Exchange Server 2010 Hub Transport and Client Access server role, 411318=2729, 203181=To determine the optimal number of Exchange databases to deploy, use the Exchange 2010 Mailbox Server Role Requirements Calculator. Enter the appropriate information on the input tab and select Yes for Automatically Calculate Number of Databases / DAG. For the mailbox size limit field, use the fully provisioned mailbox quota of 2,048\u00a0MB., 282393=Windows Server 2008 R2 Hyper-V Enterprise, 72373=Long-term data storage\u00a0\u00a0\u00a0Sometimes, backups also serve an archival purpose. Typically, tape is used to preserve point-in-time snapshots of data for extended periods of time as governed by compliance requirements. The new archiving, multiple-mailbox search, and message retention features in Exchange\u00a02010 provide a mechanism to efficiently preserve data in an end-user accessible manner for extended periods of time. For more information, see Understanding Personal Archives, Understanding Multi-Mailbox Search, and Understanding Retention Tags and Retention Policies., 85550=A DAG is a boundary for mailbox database replication, database and server switchovers and failovers, and for an internal component called Active Manager. Active Manager is an Exchange\u00a02010 component, which manages switchovers and failovers. Active Manager runs on every server in a DAG., 302560=Microsoft Exchange Server Jetstress 2010 (64 bit), 314701=In this Performance Monitor snapshot, which displays various counters that represent the amount of Exchange work being performed over time on a production Mailbox server, the average value for RPC operations per second (the highlighted line) is about 2,386 when averaged across the entire day. The average for this counter during the peak period from 10:00 through 11:00 is about 4,971, giving a peak-to-average ratio of 2.08., 38420=32400, 225694=In Exchange 2010, the RPC Client Access service and the Exchange Address Book service were introduced on the Client Access server role to improve the mailbox users experience when the active mailbox database copy is moved to another Mailbox server (for example, during mailbox database failures and maintenance events). The connection endpoints for mailbox access from Microsoft Outlook and other MAPI clients have been moved from the Mailbox server role to the Client Access server role. Therefore, both internal and external Outlook connections must now be load balanced across all Client Access servers in the site to achieve fault tolerance. To associate the MAPI endpoint with a group of Client Access servers rather than a specific Client Access server, you can define a Client Access server array. You can only configure one array per Active Directory site, and an array can't span more than one Active Directory site. For more information, see Understanding RPC Client Access and Understanding Load Balancing in Exchange 2010., 23869=Topic Last Modified: 2012-03-05, 137420=The Cisco Unified Computing System B200 with Intel Xeon X5570 processors is selected because this blade server had the optimal balance of processing power, memory capacity, and form factor for this deployment. The two-socket server platform is frequently a good choice for Exchange 2010 deployments, based on all relevant factors, including scalability and cost. The Cisco Unified Computing System B250 supports a higher memory configuration and higher I/O throughput, but this isn't required for the solution., 391773=To validate the scenario with an Outlook 2007 client, perform the following:, 26365=Microsoft Exchange Server 2010 with Service Pack 1 (SP1), 46683=% in Microsoft Office Outlook Web App (Outlook Web Access in Exchange 2007 and previous versions), 307123=The Jetstress tool produces a report file after each test is completed. To help you analyze the report, use the guidelines in Reading Jetstress 2010 Test Reports., 409778=Testing against all disks per site on a single storage frame shows that CX4-480 handles just over 8,000 Exchange 2010 transactional IOPS across eight Exchange VMs configured with the user profile of 150 messages at .15 IOPS and an additional 20\u00a0percent headroom. Performance exceeded the target baseline of 5,832 IOPS required for this configuration and provided some additional headroom for peak loads. Disk latencies were all within the acceptable parameters according to Microsoft best practices for Exchange 2010 performance., 254392== (2379 + 238) \u00f7 0.8, 61575=The following section provides a step-by-step methodology used to design this solution. This methodology takes customer requirements and design assumptions and walks through the key design decision points that need to be made when designing an Exchange 2010 environment., 390288=Clients will continue to try to connect, and should automatically connect after Time to Live (TTL) has expired for the original DNS entry, and after the entry is expired from the client's DNS cache. Users can also run the ipconfig /flushdns command from a command prompt to manually clear their DNS cache. If using Outlook Web App, the Web browser may need to be closed and restarted to clear the DNS cache used by the browser. In Exchange 2010 SP1, this browser caching issue can be mitigated by configuring the FailbackURL parameter on the Outlook Web App virtual directory owa., 313048=Exchange Load Generator 2010 (64 bit), 25241=In Exchange 2010 Tested Solutions, Microsoft and participating server, storage, and network partners examine common customer scenarios and key design decision points facing customers who plan to deploy Microsoft Exchange Server 2010. Through this series of white papers, we provide examples of well-designed, cost-effective Exchange 2010 solutions deployed on hardware offered by some of our server, storage, and network partners., 217596=In Exchange 2010, the DAG uses a minimal set of components from Windows failover clustering. One of those components is the quorum resource, which provides a means for arbitration when determining cluster state and making membership decisions. It's critical that each DAG member have a consistent view of how the DAGs underlying cluster is configured. The quorum acts as the definitive repository for all configuration information relating to the cluster. The quorum is also used as a tiebreaker to avoid split brain syndrome. Split brain syndrome is a condition that occurs when DAG members can't communicate with each other but are available and running. Split brain syndrome is prevented by always requiring a majority of the DAG members (and in the case of DAGs with an even number of members, the DAG witness server) to be available and interacting for the DAG to be operational., 228948=The Cisco ACE product line provides a highly available and scalable datacenter solution from which the Exchange 2010 application environment can benefit. Cisco ACE products offer interoperability, with the following advantages:, 113037=1024, 171875=If you maintain a 1:1 ratio of logical to virtual processors, this leaves two virtual processors for each Client Access and Hub Transport combination server. Because you want to maintain a 1:1 ratio of Mailbox server cores to Client Access and Hub Transport combination server cores, assign four virtual processors to each Client Access and Hub Transport combination server. This results in a scenario where the number of virtual processors exceeds the number of physical processors on the root server. This is referred to as oversubscription. Under most circumstances, we recommend that you don't use oversubscription. However, in this solution, the Mailbox server VMs in the alternate DAG will only be used during a site failure event. Because this is a low occurrence event, a slight oversubscription is okay., 122360== 6 MB \u00d7 32400, 71619=Recovery of accidentally deleted items\u00a0\u00a0\u00a0With the new Recoverable Items folder in Exchange\u00a02010 and the hold policy that can be applied to it, it's possible to retain all deleted and modified data for a specified period of time, so recovery of these items is easier and faster. For more information, see Messaging Policy and Compliance, Understanding Recoverable Items, and Understanding Retention Tags and Retention Policies., 158431=1:1, 126625== 2 \u00d7 32400, 103310== 0.10 \u00d7 32400 \u00d7 1.2, 64456=In this solution, there are three physical datacenter locations. The SLA states that datacenter resiliency is required for all mission-critical services including e-mail. The Exchange 2010 design will be based on a multisite deployment with site resiliency for the messaging service and data., 257215== (2700 \u00d7 20 \u00d7 1024 \u00d7 4) + (2700 \u00d7 0.01 \u00d7 2048), 96027== (32400 \u00d7 2301 \u00d7 1) + (14910480), 195298== 2700 \u00d7 6\u00a0MB, 142383=In previous steps, you calculated the required megacycles for the entire environment based on megacycle per mailbox estimates. Those estimates were measured on a baseline system (HP DL380 G5 x5470 3.33\u00a0GHz, 8 cores) that has a SPECint_rate2006 value of 150 (for an 8 core server), or 18.75 per core., 275705=The previous section provided information about the design decisions that were made when considering an Exchange 2010 solution. The following section provides an overview of the solution., 240450=Many customers want to significantly increase their mailbox quotas as they move to Exchange 2010. However, it may take some time for mailbox sizes to grow from several hundred megabytes to several gigabytes in size. In this case, it may be beneficial for some organizations to try and defer additional storage purchases to some point in the future when disk storage space is likely to be less expensive., 106703=For more information about choosing a storage solution for Exchange 2010, see Mailbox Server Storage Design., 412627=1238, 107655=There is a wide range of storage options available for Exchange 2010. The list of choices can be reduced by determining whether deploying a direct-attached storage (DAS) solution (including using local disk) or a SAN solution is preferred. There are many reasons for choosing one over the other, and you should work with your preferred storage vendor to determine which solution meets your business and total cost of ownership (TCO) requirements., 98188== (1\u00a0MB \u00d7 20 \u00d7 4 \u00d7 32400) + (32400 \u00d7 0.01 \u00d7 2048\u00a0MB), 285134=Exchange Server 2010 Standard Edition, 254040== (2700 \u00d7 752 \u00d7 1) + (406080), 185114== 12960, 108185=In this example, a SAN infrastructure is deployed, and SAN is used for storing all data in the environment. A SAN storage solution will continue to be used, and options for deploying Exchange 2010 will be explored., 127849== 0.1 \u00d7 32400 \u00d7 2, 85227=A DAG is the base component of the high availability and site resilience framework built into Exchange 2010. A DAG is a group of up to 16 Mailbox servers that hosts a set of replicated databases and provides automatic database-level recovery from failures that affect individual servers or databases., 99814=2301, 412666=1560, 188380== (2700 \u00d7 2) + 2 \u00d7 (2700 \u00d7 2 \u00d7 0.1), 79252=Exchange 2010 has been re-engineered for mailbox resiliency. Automatic failover protection is now provided at the mailbox database level instead of at the server level. You can strategically distribute active and passive database copies to Mailbox servers within a DAG. Determining how many database copies you plan to activate on a per-server basis is a key aspect to Exchange 2010 capacity planning. There are different database distribution models that you can deploy, but generally we recommend one of the following:, 140683=To help simplify the process of obtaining the benchmark value for your server and processor, we recommend you use the Exchange Processor Query tool. This tool automates the manual steps to determine your planned processor's SPECint 2006 rate value. To run this tool, your computer must be connected to the Internet. The tool uses your planned processor model as input, and then runs a query against the Standard Performance Evaluation Corporation Web site returning all test result data for that specific processor model. The tool also calculates an average SPECint 2006 rate value based on the number of processors planned to be used in each Mailbox server. Use the following calculation:, 141662=SPECint_rate2006 value per processor core = 256 \u00f7 8, 94825== 2048 + 7.3 + 246, 185092== 10800 + 2160, 237365=A well designed storage solution is a critical aspect of a successful Exchange 2010 Mailbox server role deployment. For more information, see Mailbox Server Storage Design., 308669=Transition Pages Repurposed/sec (Windows Server 2003, Windows Server 2008, Windows Server 2008 R2), 147555== 10800 \u00f7 12990, 92571=Microsoft has created a Mailbox Server Role Requirements Calculator that will do most of this work for you. To download the calculator, see E2010 Mailbox Server Role Requirements Calculator. For additional information about using the calculator, see Exchange 2010 Mailbox Server Role Requirements Calculator., 161383=Several factors are important when considering server virtualization for Exchange. For more information about supported configurations for virtualization, see Exchange 2010 System Requirements., 120108=The Extensible Storage Engine (ESE) uses database cache to reduce I/O operations. In general, the more database cache available, the less I/O generated on an Exchange\u00a02010 Mailbox server. However, there's a point where adding additional database cache no longer results in a significant reduction in IOPS. Therefore, adding large amounts of physical memory to your Exchange server without determining the optimal amount of database cache required may result in higher costs with minimal performance benefit., 220569=When you plan your Exchange 2010 organization, one of the most important decisions that you must make is how to arrange your organization's external namespace. A namespace is a logical structure usually represented by a domain name in Domain Name System (DNS). When you define your namespace, you must consider the different locations of your clients and the servers that house their mailboxes. In addition to the physical locations of clients, you must evaluate how they connect to Exchange 2010. The answers to these questions will determine how many namespaces you must have. Your namespaces will typically align with your DNS configuration. We recommend that each Active\u00a0Directory site in a region that has one or more Internet-facing Client Access servers have a unique namespace. This is usually represented in DNS by an A record, for example, mail.contoso.com or mail.europe.contoso.com., 26481=Windows Server 2008 R2 Hyper-V, 123164=Mailbox server capacity planning has changed significantly from previous versions of Exchange due to the new mailbox database resiliency model provided in Exchange 2010. For additional information, see Mailbox Server Processor Capacity Planning., 243167=When leveraging thin provisioning on EMC unified storage for Exchange 2010 deployments, it's a best practice to separate log files from database files. If you anticipate growth in mailbox size but not in the message profile (messages sent/received per day), you will need to incrementally increase the database LUNs but not the log LUNs. It may not be beneficial to put the logs on thin provisioned LUNs., 100445=372306, 282672=Exchange Server 2010 Mailbox server role, 105527== 2592, 146507== 12990, 241806=The current Exchange implementation has a defined mailbox quota of 200\u00a0MB. After moving to Exchange 2010, it's estimated that mailbox sizes will grow approximately 300\u00a0percent in the first 12 to 18 months. The plan is to purchase sufficient storage to accommodate an average mailbox size of 600\u00a0MB. Over the life of the Exchange 2010 implementation, average mailbox size is expected to approach 2\u00a0GB. Because it's expensive to pay for 2\u00a0GB mailbox quotas, thin provisioning will be implemented, so that an initial mailbox quota of 600\u00a0MB can be deployed. The underlying physical storage will be expanded in subsequent budget cycles to meet the anticipated demand., 282563=Windows Server 2008 R2 Enterprise, 472961=This white paper provides an example of how to design, test, and validate an Exchange 2010 solution for customer environments with 32,400 mailboxes in multiple sites deployed on Cisco and EMC hardware. The step-by-step methodology in this document walks through the important design decision points that help address key challenges while ensuring that core business requirements are met., 106295=Exchange 2010 includes improvements in performance, reliability, and high availability that enable organizations to run Exchange on a wide range of storage options., 62528=When designing an Exchange 2010 environment, many design decision points for high availability strategies impact other design components. We recommend that you determine your high availability strategy as the first step in the design process. We highly recommend that you review the following information prior to starting this step:, 255602== (2700 \u00d7 2301 \u00d7 1) + (1242540), 302705=Microsoft Exchange Server Jetstress 2010 (32 bit), 287581=Exchange Server 2010 Enterprise Edition, 313181=Exchange Load Generator 2010 (32 bit), 105487== 0.10 \u00d7 21600 \u00d7 1.2, 230386=The Cisco ACE product line includes two different hardware load balancing models that meet the needs for the highly available and scalable datacenter solution appropriate for the Exchange 2010 application environment. These are the Cisco ACE 4710 appliance and the integrated service module in the Cisco Catalyst 6500/Cisco 7600 routing platforms., 188447== 5400 + 1080, 130265=Average megacycles per mailbox = 90720 \u00f7 32400 = 2.8, 26440=Windows Server 2008 R2, 410955=1944 / 3888, 117711=In this example, the solution needs to provide 122\u00a0terabytes of usable storage and 2,592 IOPS. Any of the options in the preceding table will handle the IOPS requirements, so the decision will be based on capacity requirements. The CLARiiON CX4 model 240 only provides approximately 100\u00a0terabytes of usable capacity with 450\u00a0GB disks in a RAID-5 configuration. The EMC CLARiiON CX4 model 480 is selected because it provides the necessary capacity and I/O performance to support all Exchange 2010 requirements., 70795=Exchange\u00a02010 includes several new features and core changes that, when deployed and configured correctly, can provide native data protection that eliminates the need to make traditional data backups. Backups are traditionally used for disaster recovery, recovery of accidentally deleted items, long-term data storage, and point-in-time database recovery. Exchange 2010 can address all of these scenarios without the need for traditional backups:, 276552=This solution consists of a total of 36 Exchange 2010 servers deployed in a multisite topology. Twelve of the 36 servers are running both the Client Access and Hub Transport server roles. The other 24 servers are running the Mailbox server role. There is a Client Access server array with four Client Access and Hub Transport combination servers in each site. There are three DAGs, each with eight Mailbox servers. File servers in each site host the primary and alternate file share witness servers for each DAG., 129181== 0.3 \u00d7 32400 \u00d7 2, 141599=SPECint_rate2006 value = 256, 24634=June 2011}",
    "textBeforeTable": "Exchange components The following tables summarize the key Exchange and hardware components of this solution. Solution Summary Return to top This document provides an example of how to design, test, and validate an Exchange Server 2010 solution running Windows Server 2008 R2 Hyper-V technology for a customer environment with 32,400 mailboxes deployed on Cisco Unified Computing System blade servers and EMC CLARiiON storage solutions. One of the key challenges with designing larger Exchange 2010 environments is examining the current server and storage options available and making the right hardware choices that provide the best value over the anticipated life of the solution. Following the step-by-step methodology in this document, we will walk through the important design decision points that help address these key challenges while ensuring that the customer's core business requirements are met. After we have determined the optimal solution for this customer, the solution undergoes a standard validation process to ensure that it holds up under simulated production workloads for normal operating, maintenance, and failure scenarios. Introduction Additional Information Conclusion Server Design Validation Results Storage",
    "textAfterTable": "Volume Shadow Copy Service (VSS) backup None Site resiliency Yes Number of sites 3 Database availability group (DAG) model Active/Active distribution (multiple DAGs) Virtualization Hyper-V Exchange server count 4 virtual machines (VMs) Physical server count 2 Hardware components Hardware component Value or description Server partner Cisco Server model M200 Server type Blade Processor Intel Xeon X5570 Storage partner EMC Storage model CX4-480 Storage type Storage area network (SAN) Disk type 450\u00a0GB 15,000 SAS 3.5\" Load balancing partner Cisco Hardware load balancing model Ace Return to top Customer Requirements One of the most important first steps in Exchange solution design is to accurately summarize the business and technical requirements that",
    "hasKeyColumn": true,
    "keyColumnIndex": 0,
    "headerRowIndex": 0
}